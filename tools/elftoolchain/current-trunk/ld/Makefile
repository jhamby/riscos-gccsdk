# $Id: Makefile 2508 2012-05-20 22:29:48Z kaiwang27 $

TOP=	..

PROG=	ld
WARNS?=	6

SRCS=	amd64.c			\
	amd64_script.c		\
	i386.c			\
	i386_script.c		\
	ld_arch.c		\
	ld_error.c 		\
	ld_exp.c		\
	ld_file.c		\
	ld_input.c		\
	ld_layout.c		\
	ld_main.c 		\
	ld_options.c		\
	ld_output.c		\
	ld_path.c		\
	ld_reloc.c		\
	ld_script.c		\
	ld_strtab.c		\
	ld_symbols.c		\
	y.tab.h
LSRC=	ld_script_lexer.l
YSRC=	ld_script_parser.y

.SUFFIXES:	.ld .c
.ld.c:
	awk -f ld_script.awk ${.ALLSRC} > ${.TARGET}

GENSRCS=	amd64_script.c i386_script.c

CLEANFILES+=	${GENSRCS}

DPADD=	${LIBELFTC} ${LIBELF}
LDADD=	-lelftc -lelf

CFLAGS+= -I. -I${.CURDIR}

NOMAN=

.include "${TOP}/mk/elftoolchain.prog.mk"
