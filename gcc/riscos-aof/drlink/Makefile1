lib=
cc=gcc -O2 -mpoke-function-name -mthrowback -c
flags=-DTARGET_UNIXLIB
link=drlink -o

.SUFFIXES:	.o .c
.c.o:;	$(CC) -o $@ -c $< $(lib) $(flags)

OBJ =	o.Aoffiles o.Areas o.C++names o.Debug o.Drlmain o.Files \
	o.Heap o.Libraries o.Linkdebug o.Linkedit o.Linkfiles \
	o.Messages o.Stdcode o.Symbols

drlink_new:	$(OBJ)
	$(link) drlink_new $(OBJ) gcc:o.libgcc unix:o.unixlib
		
# Dynamic dependencies:
o.Stdcode:	c.Stdcode
o.Stdcode:	h.Drlhdr
o.Stdcode:	h.Areahdr
o.Stdcode:	h.Symbolhdr
o.Stdcode:	h.Areahdr
o.Stdcode:	h.Filehdr
o.Stdcode:	h.Chunkhdr
o.Stdcode:	h.Symbolhdr
o.Stdcode:	h.Areahdr
o.Stdcode:	h.Symbolhdr
o.Stdcode:	h.Procdefs
o.Stdcode:	h.Chunkhdr
o.Stdcode:	h.Filehdr
o.Symbols:	c.Symbols
o.Symbols:	h.Drlhdr
o.Symbols:	h.Chunkhdr
o.Symbols:	h.Symbolhdr
o.Symbols:	h.Areahdr
o.Symbols:	h.Symbolhdr
o.Symbols:	h.Edithdr
o.Symbols:	h.Procdefs
o.Symbols:	h.Chunkhdr
o.Symbols:	h.Filehdr
o.Symbols:	h.Chunkhdr
o.Symbols:	h.Areahdr
o.Symbols:	h.Symbolhdr
