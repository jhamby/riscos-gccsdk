#!/bin/sh
# Convert includes in assembler files
case ${1} in
 -path) conv="s!unixlib/asm_dec.s!UnixHdr:unixlib.s.asm_dec!" 
  ;;
 -nopath) conv="s!UnixHdr:unixlib.s.asm_dec!unixlib/asm_dec.s!" 
  ;;
 *) echo "includes [-path|-nopath]"
    exit 1
;;
esac

for dir in `find ../source -type d -name s`
do
 for file in `find ${dir}/* -type f -maxdepth 0`
 do
  sed ${file} -e "${conv}" > ${file}.tmp
  mv ${file}.tmp ${file}
 done
done
