AB_CATEGORY=Games
AB_COPYSOURCE=yes

ab_package() {

  AD=$D/Apps/Games
  mkdir -p $AD
  cp -av $H/\!Wesnoth $AD
  cp -av $H/\!Wesnoth/\!* $AD/\!Wesnoth
  cp -av src/wesnoth,ff8 $AD/\!Wesnoth/wesnoth,ff8

  mkdir -p $AD/\!Wesnoth/docs
  cp -av $S/changelog $S/copying $S/COPYRIGHT \
    MANUAL README \
    $AD/\!Wesnoth/docs
  cp -av $H/\!Wesnoth/docs/RISCOS $AD/\!Wesnoth/docs

  cp -r $S/data $AD/\!wesnoth
  # Some of the language files have an @ char in that RISC OS
  # doesn't like in filenames.
  for fname in `find $AD -name "*@*"` ; do mv $fname ${fname/@/A} ; done

  cp -r $S/fonts $AD/\!wesnoth
  cp -r $S/images $AD/\!wesnoth
  cp -r $S/sounds $AD/\!wesnoth
  cp -r $S/music $AD/\!wesnoth

  $AB_HOME/add-riscpkg -unixlib -unixsound -unixhome
}

export LIBS="-ljpeg -lpng -ltiff -lz -lvorbisidec -lintl"
AB_CONFLAGS="--without-x"

cp $H/libtool $S
