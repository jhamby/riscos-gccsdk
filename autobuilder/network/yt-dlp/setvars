AB_URL=https://files.pythonhosted.org/packages/06/60/c4146cecfe7f480fc3cb1a8608ba123b7c1e0b74813db77b8f04fd7a7280/yt-dlp-2022.5.18.tar.gz

AB_PACKAGES=yt-dlp
AB_CATEGORY=System
AB_ROVERSION=1
AB_PRECONF=:
AB_MAKE=:

python3 setup.py build

ab_package() {

  mkdir -p $D/yt-dlp/Resources/!PythonSite/Python38/Site-Packages
  mkdir -p $D/yt-dlp/Resources/!PythonSite/Scripts

  cp -rav $S/build/lib/yt_dlp $D/yt-dlp/Resources/!PythonSite/Python38/Site-Packages
  cp -av $H/yt-dlp,feb $D/yt-dlp/Resources/!PythonSite/Scripts

  $AB_HOME/add-riscpkg -section Development -package yt-dlp -name YT-DLP -depends "Python-38" \
   -depends ZLib1g -depends LibSSL -depends TaskRunner -copyrightfile LICENSE

  mkdir -p $D/yt-dlp/RiscPkg

cat <<EOF  >> $D/yt-dlp/RiscPkg/Control,fff
Description: A youtube-dl fork with additional features and fixes
 yt-dlp is a youtube-dl fork based on the now inactive youtube-dlc. The main
 focus of this project is adding new features and patches while also keeping
 up to date with the original project
EOF

}

