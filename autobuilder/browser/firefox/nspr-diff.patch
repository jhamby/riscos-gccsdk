Index: nsprpub/configure.in
===================================================================
RCS file: /cvsroot/mozilla/nsprpub/configure.in,v
retrieving revision 1.83.2.106.4.3.2.3
diff -u -r1.83.2.106.4.3.2.3 configure.in
--- nsprpub/configure.in	22 Feb 2006 23:03:11 -0000	1.83.2.106.4.3.2.3
+++ nsprpub/configure.in	22 May 2006 00:40:38 -0000
@@ -626,6 +626,7 @@
         solaris*)     OS_ARCH=SunOS OS_RELEASE=5 ;;
         mingw*)       OS_ARCH=WINNT ;;
         darwin*)      OS_ARCH=Darwin ;;
+        riscos*)      OS_ARCH=RISCOS ;;
     esac
 else
     OS_ARCH=`uname -s | sed -e 's|/|_|g'`
@@ -1791,7 +1792,7 @@
     MDCPUCFG_H=_riscos.cfg
     PR_MD_CSRCS=riscos.c
     DLL_SUFFIX=a
-    LD="/home/riscos/env/ro-ar cr"
+    LD="$GCCSDK_INSTALL_ENV/ro-ar cr"
     ;;
 
 *-*-sco*)
Index: nsprpub/pr/src/malloc/prmem.c
===================================================================
RCS file: /cvsroot/mozilla/nsprpub/pr/src/malloc/prmem.c,v
retrieving revision 3.6.4.7.12.1
diff -u -r3.6.4.7.12.1 prmem.c
--- nsprpub/pr/src/malloc/prmem.c	18 Aug 2005 17:24:30 -0000	3.6.4.7.12.1
+++ nsprpub/pr/src/malloc/prmem.c	22 May 2006 00:40:39 -0000
@@ -150,7 +150,7 @@
     return sym;
 }
 
-#elif defined(USE_MACH_DYLD)
+#elif defined(USE_MACH_DYLD) || defined(RISCOS)
 
 static void *
 pr_FindSymbolInProg(const char *name)
