AB_INSTALL=yes

AB_CONFLAGS=--disable-nls

if ! [ -e /usr/bin/glib-config ] ; then
  echo "Pleaes install native libglib1.2-dev and libpopt-dev packages"
  exit 1
fi

# Build orbit-idl-compiler natively:
GLIB_CONFIG=/usr/bin/glib-config  ./configure $AB_CONFLAGS --disable-shared --enable-static
make -C src/orbit-idl-compiler
cp src/orbit-idl-compiler/orbit-idl /tmp

make clean

# Install in bin manually; make install will only put RISC OS version there.
cp /tmp/orbit-idl $GCCSDK_INSTALL_ENV/bin
mv /tmp/orbit-idl src/orbit-idl-compiler/

mkdir -p $D/include/libIDL-1.0/libIDL/
mkdir -p $D/include/orbit-1.0/ORBitutil/
mkdir -p $D/include/orbit-1.0/IIOP/
mkdir -p $D/include/orbit-1.0/orb/
mkdir -p $D/include/orbit-1.0/ORBitservices/
