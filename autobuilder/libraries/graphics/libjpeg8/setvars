AB_INSTALL=yes

AB_MANPAGE="cjpeg.1 djpeg.1 jpegtran.1 rdjpgcom.1 wrjpgcom.1"

ab_package() {
  # Package programs
  ab_create_command_app JPEGProgs Apps/Graphics libjpeg-progs
  ab_add_commands $S/*$AB_EXEEXT

  cp $S/usage.txt $A/\!Help
  cp $S/usage.txt $S/wizard.txt $A/
  cp $S/README $A/

  mv $D/*,faf $A/

  $AB_HOME/add-riscpkg -package libjpeg-progs -unixlib -section Graphics

  # Package libraries
  ab_create_app LibJPEG Apps/Library libjpeg8-dev

  HERE=`pwd`
  cd $A
  unzip $AB_OUTPUTLIB/$RO_PKG.zip

  mv include/h h
  rm -rf include

  mv lib/*.a .
  rm -rf lib

  mv doc/$RO_PKG/* doc
  rm -rf doc/$RO_PKG

  # Add some documentation
  mkdir -p $A/doc/c
  cp $S/example.c $A/doc/c/example
  cp $S/libjpeg.txt $A/\!Help
  cp $S/libjpeg.txt $S/README $S/structure.txt $A/doc

  $AB_HOME/add-riscpkg -package libjpeg8-dev -name LibJPEG8-Dev -section Library -unixlib

  mkdir -p $D/libjpeg8-dev/RiscPkg
  echo "Desciption: Development files for the IJG JPEG library" >> $D/libjpeg8-dev/RiscPkg/Control,fff
  echo " The Independent JPEG Group's JPEG library is a library for handling" >> $D/libjpeg8-dev/RiscPkg/Control,fff
  echo " JPEG files." >> $D/libjpeg8-dev/RiscPkg/Control,fff
  echo " ." >> $D/libjpeg8-dev/RiscPkg/Control,fff
  echo " This package contains the static library, headers and documentation." >> $D/libjpeg8-dev/RiscPkg/Control,fff

  cd $HERE
}
