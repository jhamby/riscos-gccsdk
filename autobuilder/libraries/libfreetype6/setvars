AB_CATEGORY=Library
AB_ZIPNAME=libfreetype6-dev

AB_INSTALL=yes
AB_INSTALLDOCS="README docs/LICENSE docs/FTL.TXT docs/GPL.TXT docs/CHANGES"

echo "echo arm-riscos-aof" > builds/unix/config.guess

(cd builds/unix ; autoconf)

AB_PRECONF="RO_CPATH=builds/unix/ CFLAGS=-O3"

$AB_MAKE setup unix

mkdir -p $D/include/freetype2/freetype/config
mkdir -p $D/include/freetype2/freetype/cache
mkdir -p $D/include/freetype2/freetype/internal

AB_MAKE="$AB_MAKE CCexe=/usr/bin/gcc"

ab_make() {
  cp freetype-config freetype2.pc ftconfig.h libtool *.mk builds/unix

  eval $AB_MAKE
}

ab_package() {
  AD=$D/Apps/Library/\!FreeType2
  mkdir -p $AD
  cp $H/\!FreeType2/\!* $AD

  cp README $AD/\!Help
  cp README $AD
  cp -r docs $AD

  HERE=`pwd`
  cd $AD

  unzip $AB_OUTPUTLIB/$RO_PKG.zip  

  mv include/freetype2 freetype2
  rm -rf include

  mv lib/*.a .
  rm -rf lib

  rm -rf bin
  rm -rf doc

  cd $HERE

  $AB_HOME/add-riscpkg -package $AB_ZIPNAME -unixlib \
    -depends "zlib1g-dev"
}
