#!/bin/bash
# Written by John Tytgat <John.Tytgat@aaug.net>
# Copyright (c) 2006 GCCSDK Developers

set -e

pushd `dirname $0` > /dev/null
GCCSDK_ROOT=`pwd`
popd > /dev/null
source $GCCSDK_ROOT/setup-gccsdk-params

TARGET=arm-unknown-riscos
GCCSDK_BUILDDIR=$GCCSDK_ROOT/$TARGET

if [ ! -d $GCCSDK_BUILDDIR ] ; then
  mkdir -p $GCCSDK_BUILDDIR
fi
if [ ! -d $PREFIX ] ; then
  mkdir -p $PREFIX
fi

cd $GCCSDK_BUILDDIR
# Note: the --disable-libssp is needed to avoid a 4.1.1 regression bug, see
#       http://gcc.gnu.org/bugzilla/show_bug.cgi?id=25035 to track its status.
$GCCSDK_SRCDIR/configure --prefix=$PREFIX --enable-threads=posix \
	--target=$TARGET --enable-sjlj-exceptions=no \
	--disable-c-mbchar --enable-languages=c,c++ \
	--enable-checking=no --disable-libstdcxx-pch \
	--enable-c99 --enable-cmath \
	--without-pic --enable-shared=libunixlib,libgcc --without-x --enable-libgcj \
	--enable-maintainer-mode

make all
make install
